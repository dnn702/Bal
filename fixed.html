<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>Idle Ballsé¢¨ã‚²ãƒ¼ãƒ </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { margin: 0; font-family: sans-serif; text-align: center; background: #eef; }
    #game { position: relative; width: 100%; height: 60vh; background: #fff; overflow: hidden; }
    .circle {
      position: absolute; width: 60px; height: 60px; border-radius: 50%;
      display: flex; align-items: center; justify-content: center;
      color: white; font-weight: bold; font-size: 14px; user-select: none; cursor: pointer;
    }
    .ball {
      position: absolute; width: 20px; height: 20px; border-radius: 50%;
    }
    .info { margin: 10px; }
    button { margin: 5px; padding: 8px 16px; font-size: 14px; }
    .ball-info { border-top: 1px solid #ccc; margin-top: 10px; padding-top: 10px; }
  /* æ—¢å­˜ã®CSSã®ã‚ã¨ã«è¿½è¨˜ */
  #ballUpgrades {
    display: flex;
    flex-wrap: nowrap;
    overflow-x: auto;
    white-space: nowrap;
    padding: 10px;
    gap: 10px;
    scroll-snap-type: x mandatory;
  }

  #ballUpgrades button {
    flex: 0 0 auto;
    scroll-snap-align: start;
  }
      #ballUpgrades {
  display: flex;
  flex-wrap: nowrap;
  overflow-x: auto;
  white-space: nowrap;
  padding: 10px;
  gap: 10px;
  scroll-snap-type: x mandatory;
}

#ballUpgrades button {
  flex: 0 0 auto;
  scroll-snap-align: start;
}


  </style>
</head>
<body>
  <h1>Idle Ballsé¢¨ã‚²ãƒ¼ãƒ </h1>
  <div class="info">
    <div>ãƒã‚¤ãƒ³ãƒˆ: <span id="points">0</span></div>
    <div id="ballUpgrades"></div>
<button onclick="tupg()">Tap Upgrade</button>
    <div class="ball-info">
      <h3>Ball Info</h3>
      <div id="ballInfo"></div>
    </div>
  </div>
  <div id="game"></div>

  <script>
    const ATTACK_NUM = 3n, ATTACK_DEN = 2n;
    const COST_NUM = 17n, COST_DEN = 10n;
    let points = 0n;
    let stage = 1;
    let circles = [];
    let balls = [];
    let tapAttack = 1n;
    let tapCost = 20n;

    const UNITS = (() => {
      const chars = 'abcdefghijklmnopqrstuvwxyz';
      const u = ['', 'k', 'm', 'b', 't', 'q', 'Q', 's', 'S', 'o', 'O', 'n', 'N', 'd', 'D', 'u', 'U', 'p', 'P', 'g', 'G', 'h', 'H', 'l', 'L', 'i', 'I', 'j', 'J', 'c', 'C', 'v', 'V', 'w', 'W', 'x', 'X', 'y', 'Y', 'z', 'Z', 'XX', 'YY', 'ZZ', 'ND', 'SS', 'NN', 'T', 'Mj', 'Bj', 'wX', '!', '!!', '?', '??', '!?', '?!', '!!!', '???', 'Gc', 'CC', 'ZN', 'Un', 'Ad', 'â–¡', 'â– ', 'â—‹', 'â—', 'â—‡', 'â—†', 'â–³', 'â–²', 'â–½', 'â–¼', 'â–¦', 'âˆ', 'XS', 'âš€', 'âš', 'âš‚', 'âšƒ', 'âš„', 'âš…', 'â™•', 'â™›', 'â™–', 'â™œ', 'â™—', 'â™', 'â™˜', 'â™', 'â™™', 'â™Ÿ', 'â˜ ', 'â˜»', 'â˜…', 'âœ«', 'â˜°', 'â˜·', 'â˜²', 'â˜µ', 'â˜¶', 'â˜³', 'â˜´', 'â˜±', 'â˜©', 'â‡”', 'âœ¤', 'âœ¿', 'â€', 'ğ–¡—', 'ê•¥', 'â•¬', 'âˆµ', 'Zz', 'Qd', 'Qi', 'LL', 'WW', 'XC', 'DD', 'iii', 'III', 'UU', 'Yn', 'Vi', 'ã‚', 'ã„', 'ã†', 'ãˆ', 'ãŠ', 'ã‹', 'ã', 'ã', 'ã‘', 'ã“', 'ã•', 'ã—', 'pO', 'HW', 'EE', 'Gt', 'âˆ†', 'Â©', 'ã€„', 'JN', 'Dâ—‹', 'â—˜', 'â—˜â—˜', 'â—˜â—˜â—˜', 'BY', 'Yy', 'NL', 'UI', 'IU', 'gS', 'n', 'N', 'iO', 'Gh', 'âˆ«', 'âˆ¬', 'âˆ«âˆ«', 'â‚ª', 'Â¤', 'â‚ ', 'âœ¡', 'âœ£', 'âœ¾', 'â†', 'âœ³', 'â™¡', 'â™¤', 'â™¢', 'â™§', 'â—', 'âœ–', 'â—', 'â—‘', 'âœ', 'áƒ¦', 'âœ†', 'â™¯', 'â˜¼', 'Â®', 'Å¡', 'Å ', 'Ö', 'Ö', 'à¬', 'JJ', 'VIC', 'H!', 'N!', 'U!', 'â£¿', 'â§‡', 'â§º', 'â§»', 'CCC', 'à¿Š', 'à¿‹', 'à¿Œ', 'â§²', 'â§³', 'â¨Œ', 'â¨•', 'â¨–', 'â¨˜', 'â¨·', 'â¨¸', 'â©¨', 'â©©', 'â–¢', 'â–¤', 'â–¥', 'â–§', 'â–¨', 'â–©', 'â—™', 'â—š', 'â—›', 'â—´', 'â—µ', 'â—¶', 'â—·', 'â˜ª', 'â˜«', 'â˜¬', 'â˜¹', 'ğ„¡', 'ğ„ ', 'ğ„ª', 'XP', 'XD', 'XYZ', 'ğ‡›', 'ğœ•', 'ğ“‚', 'ğ“‹', 'ğ“', 'ğ“¿', 'ğ”˜³', 'ğ”˜’', 'ğ”—²', 'ğ”—¢', 'ğ”— ', 'ğ”—¡', 'ğ”—ª', 'ğ”—¬', 'ğ–¦˜', 'ğ–¦§', 'ğ–¥¸', 'ğ–¥Ÿ', 'ğ–¤“', 'ğ–¤…', 'ğ–£˜', 'ğ–£', 'ğ–£¥', 'ğ–¢°', 'ğ–¢«', 'ğ–«¤', 'ğ–«–', 'ğ–¬»', 'ã™', 'ã›', 'ã', 'ãŸ', 'ã¡', 'ã¤', 'ã¦', 'ã¨', 'ãª', 'ã«', 'ã¬', 'ã­', 'ã®', 'ã¯', 'ã²', 'ãµ', 'ã¸', 'ã»', 'ã¾', 'ã¿', 'ã‚€', 'ã‚', 'ã‚‚', 'ã‚„', 'ã‚†', 'ã‚ˆ', 'ã‚‰', 'ã‚Š', 'ã‚‹', 'ã‚Œ', 'ã‚', 'ã‚', 'ã‚', 'ã‚”', 'ã‚‘', 'ã‚’', 'ã‚“', 'ãŒ', 'ã', 'ã', 'ã’', 'ã”', 'ã–', 'ã˜', 'ãš', 'ãœ', 'ã', 'ã ', 'ã¢', 'ã¥', 'ã§', 'ã©', 'ã°', 'ã³', 'ã¶', 'ã¹', 'ã¼', 'ã', 'ãƒ', 'ã…', 'ã‡', 'ã‰', 'ã£', 'ã‚ƒ', 'ã‚…', 'ã‚‡', 'YS', 'ZS', 'NNN', 'NNP', 'DX', 'BTS', 'STB', 'NOT', 'ğŸ€†', 'ğŸ€‘', 'ğŸ€’', 'ğŸ€“', 'ğŸ€”', 'ğŸ€•', 'ğŸ€–', 'ğŸ€—', 'ğŸ€˜', 'ğŸ€«', 'ğŸ€™', 'ğŸ€š', 'ğŸ€›', 'ğŸ€œ', 'ğŸ€', 'ğŸ€', 'ğŸ€Ÿ', 'ğŸ€ ', 'ğŸ€¡', 'ğŸ€†ğŸ€†', 'ğŸ€ ğŸ€ ', 'ğŸ€¦',  'ğŸ€§', 'ğŸ€¨', 'ğŸ€©', 'ABC', 'ç§çµ„çµµ', 'â†€', 'â†', 'â†‚', 'â†‡', 'â†ˆ', 'â‡ª', 'â‡«', 'â‡¬', 'â‡­', 'â‡®', 'â‰ˆ', 'â‰‰', 'â‰‹', 'â‰', 'â‰', 'â‰‘', 'â‰’', 'â‰“', 'â‰–', 'â‰¡', 'â‰£', 'â‰ ', 'â‰­', 'âŠ', 'âŠ•', 'âŠ–', 'âŠ—', 'âŠ˜', 'âŠ™', 'âŠš', 'âŠœ', 'âŠŸ', 'âŠ ', 'âŠ¡', 'â‹’', 'â‹“', 'â‹•', 'â‹‡', 'â‹®', 'âŒ¸', 'âŒ¹', 'âŒº', 'âŒ»', 'âŒ¼', 'âŒ½', 'âŒ¾', 'â', 'â‚', 'â‡', 'âˆ', 'âŒ', 'â', 'â‰', 'â£', 'â¤', 'â ', 'âŸ', 'â¯', 'â•', 'âˆ', 'â…', 'âƒ', 'â‚', 'â­', 'â©', 'âª', 'â«', 'â¬', 'â€', 'â', 'â‚', 'âƒ', 'â„', 'â¢', 'â¦', 'â¤', 'â¥', 'â‘€', 'â‘', 'â‘‚', 'â‘ƒ', 'â‘„', 'â‘…', 'â‘†', 'â‘‡', 'â‘Š', 'â‘ˆ', 'â‘‰', 'â•³', 'â–€', 'â–', 'â–‚', 'â–ƒ', 'â–„', 'â–…', 'â–†', 'â–‡', 'â–ˆ', 'â–‰', 'â–Š', 'â–‹', 'â–Œ', 'â–', 'â–', 'â–', 'â–', 'â–‘', 'â–’', 'â–“', 'â–”', 'â––', 'â–˜', 'â–™', 'â–Ÿ', 'â–', 'â–š', 'â–›', 'â–œ', 'â˜¦', 'â˜˜', 'â˜¤', 'â˜£', 'â˜¢', 'â™³', 'â™´', 'â™µ', 'â™¶', 'â™·', 'â™¸', 'â™¹', 'â™º', 'â™²', 'â™»', 'â™½', 'â™¼', 'â™¾', 'âš†', 'âš‡', 'âšˆ', 'âš‰', 'âšŠ', 'âš‹', 'âšŒ', 'âš', 'âš', 'âš', 'âš’', 'âš”', 'âš•', 'âš–', 'âš™', 'âšš', 'âš›', 'âšœ', 'âš', 'âš ', 'âš¡', 'âš¢', 'âš£', 'âš¤', 'âš¥', 'âš¦', 'âš§', 'âš¨', 'âš©', 'âš­', 'âš®', 'âš¯', 'â›€', 'â›', 'â›‚', 'â›ƒ', 'â›†', 'â›‡', 'â›’', 'â›‹', 'â›Œ', 'â›', 'â›', 'â›“', 'â›•', 'â›—', 'â›–', 'â›˜', 'â›š', 'â››', 'â›œ', 'â›', 'â›', 'â›Ÿ', 'â› ', 'â›¡', 'â›¢', 'â›£', 'â›¤', 'â›¥', 'â›¦', 'â›§', 'â›¨', 'â›©', 'â›«', 'â›¬', 'â›­', 'â›®', 'â›¯', 'â›°', 'â›·', 'â›´', 'â›¶', 'â›¹', 'â›¸', 'â›¼', 'â›»', 'â›¾', 'â›¿', 'âœ‚', 'âœ„', 'âœ‘', 'âœ’', 'âœ¶', 'âœ·', 'âœ¸', 'âœ¹', 'âœº', 'âœ»', 'âœ¼', 'âœ½', 'âœ¾', 'â', 'â‚', 'âƒ', 'â…', 'â†', 'â‡', 'âˆ', 'â‰', 'âŠ', 'â‹', 'â', 'â', 'â', 'â‘', 'â’', 'â–', 'â˜', 'â™', 'âš', 'â', 'â', 'â¢', 'â£', 'â¥', 'â¦', 'â§', 'â˜', 'â™', 'âš', 'â›', 'âœ', 'HJ', 'YO', 'RS', 'n', 'N', 'CC', 'hU', 'yB', 'Tc', 'âˆ', 'âˆ½', 'ğ‚ ', 'á¯“', 'ğ“‡¢', 'â€‹à®œ', 'uM', 'IS', 'SI', 'i!', 'I!', 'NG', 'Job', 'Kg', 'Ks', 'Rd', 'nd', 'ynD', 'Â§', 'âˆš', 'ğ‚—', 'ğ‚', 'ğ‚œ', 'ğ‚˜', 'ğ‚¬', 'ğ„™', 'ğ„š', 'ğ„›', 'ğ„œ', 'ğ„', 'ğ„', 'ğ„Ÿ', 'ğ„ ', 'ğ„¡', 'ğ„¢', 'ğ„£', 'ğ„¤', 'ğ„¥', 'ğ„¦', 'ğ„§', 'ğ„¨', 'ğ„©', 'ğ„ª', 'ğ„«', 'ğ„¬', 'ğ„­', 'ğ„®', 'ğ„¯', 'ğ„°', 'ğ„±', 'ğ„²', 'ğ„³', 'ğ„º', 'ğ‡£', 'ğ‡¤', 'ğ‡§', 'ğ‡', 'ğ‡µ', 'ğ‘„£', 'ğ‘„¦', 'ğ‘„ ', 'ğ‘„Š', 'ğ‘„‡', 'ğ‘ƒ³', 'ğ‘ƒ°', 'ğ–¥¹', 'ğ–¥—', 'ğ–¥š', 'ğ–¤¼', 'ğ–£¯', 'ğ–£¯ğ–£¯', 'ğ–¥šğ–¥š', 'HO', 'ğ–¥—ğ–¥—', 'ğ–¥šğ–£¯', 'ğ–¥—!', '!!!!', 'â€½', 'Â¡!', '!Â¡', 'Â¡?', 'â€½!', 'Â¿?', '!â€½', '?Â¿', 'æ­»', 'å¢“', 'ã‚„ã ', 'è“å­', 'n', 'N', 'Fz', 'zF', 'fZ', 'Zf', 'i!i', 'uX', 'ä½•', 'Ç…', 'Åµ', 'Å´', 'Å’', 'Å©', 'Å¨', 'Å«', 'Åª', 'Å­', 'Å¬', 'Å¯', 'Å®', 'Å±', 'Å°', 'Å³', 'Å²', 'Å§', 'Å¦', 'Ä¯', 'Ä®', 'Ä©', 'Ä¨', 'Ä«', 'Äª', 'Ä¥', 'Ä¤', 'Ä§', 'Ä¦', 'à¸¿', 'à¸°', 'à¼…', 'à¼„', 'à¼', 'à¼', 'à¼•', 'à¼–', 'à¼“', 'à¿•', 'à¿–', 'à¿—', 'à¿˜', 'CO', 'NO', 'Vig', 'XZ', 'XZZ', 'NZ', 'DH', 'CH', 'BH', 'AH', 'EH', 'FH', 'GHH', 'HHH', 'IH', 'JH', 'LH', 'MH', 'NH', 'OH', 'PH', 'QH', 'RH', 'SH', 'n', 'N', 'TH', 'UH', 'VH', 'WH', 'XH', 'YH', 'ZH', 'jJ', 'CBA', 'gA', 'eA', 'aN', 'lN', 'rN', 'oG', 'Wh', 'Wd', 'WD', 'Qx', 'QX', 'Hu', 'Gi', 'Qw', 'QW', 'Ï‰', 'Î©', '{}', '()', '[]', 'Xg', '<img src="images/Screenshot_20250427_212014.jpg" style="height: 14px; width: 14px;"></img>', '<img src="images/c.png" style="height: 14px; width: 14px;"></img>', '<img src="images/d.png" style="height: 14px; width: 14px;"></img>', '<img src="images/e.png" style="height: 14px; width: 14px;"></img>', '<img src="images/f.png" style="height: 14px; width: 14px;"></img>', '<img src="images/g.png" style="height: 14px; width: 14px;"></img>', '<img src="images/h.png" style="height: 14px; width: 14px;"></img>', '<img src="images/i.png" style="height: 14px; width: 14px;"></img>', '<img src="images/j.png" style="height: 14px; width: 14px;"></img>', '<img src="images/k.png" style="height: 14px; width: 14px;"></img>', '<img src="images/jon.png" style="height: 14px; width: 14px;"></img>', '<img src="images/iPhone.png" style="height: 14px; width: 7px;"></img>', '<img src="images/m.png" style="height: 14px; width: 14px;"></img>', '<img src="images/hng.png" style="height: 14px; width: 14px;"></img>', '<img src="images/o.png" style="height: 14px; width: 14px;"></img>', '<img src="images/p.png" style="height: 14px; width: 14px;"></img>', '<img src="images/q.png" style="height: 14px; width: 14px;"></img>', '<img src="images/r.png" style="height: 14px; width: 14px;"></img>', '<img src="images/s.png" style="height: 14px; width: 14px;"></img>', '<img src="images/t.png" style="height: 14px; width: 14px;"></img>', '<img src="images/u.png" style="height: 14px; width: 14px;"></img>', '<img src="images/v.png" style="height: 14px; width: 14px;"></img>', '<img src="images/w.png" style="height: 14px; width: 14px;"></img>', '<img src="images/x.png" style="height: 14px; width: 14px;"></img>', '<img src="images/y.png" style="height: 14px; width: 14px;"></img>', '<img src="images/z.png" style="height: 14px; width: 14px;"></img>', '<img src="images/aa.png" style="height: 14px; width: 14px;"></img>', '<img src="images/ab.png" style="height: 14px; width: 14px;"></img>', '<img src="images/ac.png" style="height: 14px; width: 14px;"></img>', '<img src="images/ad.png" style="height: 14px; width: 14px;"></img>', '<img src="images/ae.png" style="height: 14px; width: 14px;"></img>', '<img src="images/af.png" style="height: 14px; width: 14px;"></img>', '<img src="images/ag.png" style="height: 14px; width: 14px;"></img>', '<img src="images/ah.png" style="height: 14px; width: 14px;"></img>', '<img src="images/ai.png" style="height: 14px; width: 14px;"></img>', '<img src="images/aj.png" style="height: 14px; width: 14px;"></img>', '<img src="images/ak.png" style="height: 14px; width: 14px;"></img>', '<img src="images/al.png" style="height: 14px; width: 14px;"></img>', '<img src="images/am.png" style="height: 14px; width: 14px;"></img>', '<img src="images/an.png" style="height: 14px; width: 14px;"></img>', 'VK', 'Ob', 'Ot', 'St', 'Mt', 'Ht', '!X', '!!X', '<img src="images/ao.png" style="height: 14px; width: 14px;"></img>', '<img src="images/ap.png" style="height: 14px; width: 14px;"></img>', '<img src="images/aq.png" style="height: 14px; width: 14px;"></img>', '<img src="images/ar.png" style="height: 14px; width: 14px;"></img>', '<img src="images/as.png" style="height: 14px; width: 14px;"></img>', '<img src="images/at.png" style="height: 14px; width: 14px;"></img>', '<img src="images/au.png" style="height: 14px; width: 14px;"></img>', '<img src="images/av.png" style="height: 14px; width: 14px;"></img>', '<img src="images/aw.png" style="height: 14px; width: 14px;"></img>', '<img src="images/ax.png" style="height: 14px; width: 14px;"></img>', '<img src="images/ay.png" style="height: 14px; width: 14px;"></img>', '<img src="images/az.png" style="height: 14px; width: 7px;"></img>', '<img src="images/ba.png" style="height: 14px; width: 14px;"></img>', '<img src="images/bb.png" style="height: 14px; width: 14px;"></img>', '<img src="images/bc.png" style="height: 14px; width: 14px;"></img>', '<img src="images/bd.png" style="height: 14px; width: 14px;"></img>', '<img src="images/be.png" style="height: 14px; width: 14px;"></img>', '<img src="images/bf.png" style="height: 14px; width: 14px;"></img>', '<img src="images/bg.png" style="height: 14px; width: 14px;"></img>', '<img src="images/bh.png" style="height: 14px; width: 14px;"></img>', '<img src="images/bi.png" style="height: 14px; width: 14px;"></img>', '<img src="images/bj.png" style="height: 14px; width: 14px;"></img>', '<img src="images/bk.png" style="height: 14px; width: 14px;"></img>', '<img src="images/bl.png" style="height: 14px; width: 14px;"></img>', '<img src="images/bm.png" style="height: 14px; width: 14px;"></img>', '<img src="images/bn.png" style="height: 14px; width: 14px;"></img>', '<img src="images/bo.png" style="height: 14px; width: 14px;"></img>', '<img src="images/bp.png" style="height: 14px; width: 14px;"></img>', '<img src="images/bq.png" style="height: 14px; width: 14px;"></img>', '<img src="images/br.png" style="height: 14px; width: 14px;"></img>', '<img src="images/bs.png" style="height: 14px; width: 14px;"></img>', '<img src="images/bt.png" style="height: 14px; width: 14px;"></img>', '<img src="images/bu.png" style="height: 14px; width: 14px;"></img>', '<img src="images/bv.png" style="height: 14px; width: 14px;"></img>', '<img src="images/bw.png" style="height: 14px; width: 14px;"></img>', '<img src="images/bx.png" style="height: 14px; width: 14px;"></img>', '<img src="images/by.png" style="height: 14px; width: 14px;"></img>', '<img src="images/bz.png" style="height: 14px; width: 14px;"></img>', '<img src="images/ca.png" style="height: 14px; width: 14px;"></img>', '<img src="images/cb.png" style="height: 14px; width: 14px;"></img>', '<img src="images/cc.png" style="height: 14px; width: 14px;"></img>', '<img src="images/cd.png" style="height: 14px; width: 14px;"></img>', '<img src="images/ce.png" style="height: 14px; width: 14px;"></img>', '<img src="images/cf.png" style="height: 14px; width: 14px;"></img>', '<img src="images/cg.png" style="height: 14px; width: 14px;"></img>', '<img src="images/ch.png" style="height: 14px; width: 14px;"></img>', '<img src="images/ci.png" style="height: 14px; width: 14px;"></img>', '<img src="images/cj.png" style="height: 14px; width: 14px;"></img>', '<img src="images/ck.png" style="height: 14px; width: 14px;"></img>', '<img src="images/cl.png" style="height: 14px; width: 14px;"></img>', '<img src="images/cm.png" style="height: 14px; width: 14px;"></img>', '<img src="images/cn.png" style="height: 14px; width: 14px;"></img>', '<img src="images/co.png" style="height: 14px; width: 14px;"></img>', '<img src="images/cp.png" style="height: 14px; width: 14px;"></img>', '<img src="images/cq.png" style="height: 14px; width: 14px;"></img>', '<img src="images/cr.png" style="height: 14px; width: 14px;"></img>', '<img src="images/cs.png" style="height: 14px; width: 14px;"></img>', '<img src="images/1.png" style="height: 14px; width: 14px;"></img>', '<img src="images/2.png" style="height: 14px; width: 14px;"></img>', '<img src="images/3.png" style="height: 14px; width: 14px;"></img>', '<img src="images/4.png" style="height: 14px; width: 14px;"></img>', '<img src="images/5.png" style="height: 14px; width: 14px;"></img>', '<img src="images/6.png" style="height: 14px; width: 14px;"></img>', '<img src="images/7.png" style="height: 14px; width: 14px;"></img>', '<img src="images/8.png" style="height: 14px; width: 14px;"></img>', '<img src="images/æ‚ªå£.png" style="height: 14px; width: 14px;"></img>', '<img src="images/9.png" style="height: 14px; width: 14px;"></img>', '<img src="images/10.png" style="height: 14px; width: 14px;"></img>', '<img src="images/11.png" style="height: 14px; width: 14px;"></img>', '<img src="images/12.png" style="height: 14px; width: 14px;"></img>', '<img src="images/13.png" style="height: 14px; width: 14px;"></img>', '<img src="images/14.png" style="height: 14px; width: 14px;"></img>', '<img src="images/15.png" style="height: 14px; width: 14px;"></img>', '<img src="images/16.png" style="height: 14px; width: 14px;"></img>', '<img src="images/17.png" style="height: 17px; width: 14px;"></img>', '<img src="images/18.png" style="height: 18px; width: 14px;"></img>', '<img src="images/19.png" style="height: 19px; width: 14px;"></img>', '<img src="images/20.png" style="height: 14px; width: 14px;"></img>', '<img src="images/papasika.png" style="height: 14px; width: 14px;"></img>'];
      for (let len = 2; len <= 3; len++) {
        (function build(prefix, depth) {
          if (depth === 0) u.push(prefix);
          else for (const c of chars) build(prefix + c, depth - 1);
        })('', len);
      }
      return u;
    })();

    function formatBigIntNumber(value) {
      const thousand = 1000n;
      if (value < thousand) return value.toString();
      let unitIndex = 0;
      let current = value;
      while (current >= thousand && unitIndex < UNITS.length - 1) {
        current /= thousand;
        unitIndex++;
      }
      const divisor = thousand ** BigInt(unitIndex);
      const whole = value / divisor;
      const remainder = value % divisor;
      const digits = whole.toString().length;
      let result = '';
      if (digits === 1) {
        const decimal = ((remainder * 100n) / divisor).toString().padStart(2, '0');
        result = `${whole}.${decimal}`;
      } else if (digits === 2) {
        const decimal = ((remainder * 10n) / divisor).toString();
        result = `${whole}.${decimal}`;
      } else {
        result = `${whole}`;
      }
      return result + UNITS[unitIndex];
    }

    function getColor(hp, maxHp) {
      const pct = Number(hp * 100n / maxHp);
      if (pct > 80) return 'red';
      if (pct > 60) return 'orange';
      if (pct > 40) return 'yellow';
      if (pct > 20) return 'greenyellow';
      return 'lightblue';
    }

    function createCircles() {
      const game = document.getElementById('game');
      Array.from(game.children).forEach(child => {
        if (child.classList.contains('circle')) game.removeChild(child);
      });

      circles = [];
      const baseHP = 10n * BigInt(Math.floor(1.7 ** (stage - 1)));
      for (let i = 0; i < 11; i++) {
        const hp = baseHP;
        const div = document.createElement('div');
        div.className = 'circle';
        const x = Math.random() * (game.clientWidth - 60);
        const y = Math.random() * (game.clientHeight - 60);
        div.style.left = `${x}px`;
        div.style.top = `${y}px`;
        game.appendChild(div);
        const circle = { el: div, hp, maxHp: hp, x, y };
        div.onclick = () => {
          if (circle.hp > 0n) {
            const dmg = tapAttack < circle.hp ? tapAttack : circle.hp;
            circle.hp -= dmg;
            points += dmg;
            updateUI();
            renderCircles();
            if (circles.every(c => c.hp <= 0n)) {
              stage++;
              createCircles();
            }
          }
        };
        circles.push(circle);
      }
      renderCircles();
    }

    function renderCircles() {
      circles.forEach(c => {
        if (c.hp <= 0n) {
          c.el.style.display = 'none';
        } else {
          c.el.style.display = 'flex';
          c.el.style.background = getColor(c.hp, c.maxHp);
          c.el.innerHTML = formatBigIntNumber(c.hp);
        }
      });
    }

    const ballTypes = [
      { color: 'red', attack: 1n, cost: 10n },
      { color: 'blue', attack: 30n, cost: 300n },
      { color: 'yellow', attack: 90n, cost: 1800n },
      { color: 'green', attack: 270n, cost: 6000n },
      { color: 'orange', attack: 810n, cost: 17500n },
      { color: 'yellowgreen', attack: 2000n, cost: 35000n },
      { color: 'gray', attack: 10000n, cost: 80000n },
      { color: 'lightblue', attack: 50000n, cost: 160000n },
      { color: 'purple', attack: 100000n, cost: 1020000n },
      { color: 'pink', attack: 530000n, cost: 11830000n },
      { color: 'black', attack: 995000n, cost: 73000000n },
      { color: 'brown', attack: 1900000n, cost: 700000000n },
{ color: 'greenyellow', attack: 8000000n, cost: 8100000000n },
{ color: '#F8C3B6', attack: 11000000n, cost: 10000000000n },
{ color: 'chocolate', attack: 1000000000, cost: 100000000000n },
{ color: 'springgreen', attack: 50000000000n, cost: 500000000000n },
{ color: 'royalblue', attack: 100000000000n, cost: 1000000000000n },
{ color: '#B00000', attack: 345100000000n, cost: 9900000000000n },
{ color: 'gold', attack: 1850000000000n, cost: 10000000000000n },
{ color: 'darkpurple', attack: 6050000000000n, cost: 50000000000000n },
{ color: '#212728', attack: 18500000000000n, cost: 100000000000000n },
{ color: 'magenta', attack: 78500000000000n, cost: 1000000000000000n },
{ color: 'darkred', attack: 585000000000000n, cost: 19800000000000000n },
{ color: 'yellowgreen', attack: 4850000000000000n, cost: 38500000000000000n },
{ color: '#666666', attack: 38850000000000000n, cost: 200000000000000000n },
{ color: '#123456', attack: 388500000000000000n, cost: 2000000000000000000n },
{ color: '#ABCDEF', attack: 3885000000000000000n, cost: 15300000000000000000n },
{ color: '#A00000', attack: 38850000000000000000n, cost: 553000000000000000000n },
{ color: '#EEEEEE', attack: 388500000000000000000n, cost: 1530000000000000000000n },
{ color: '#700129', attack: 3885000000000000000000n, cost: 15300000000000000000000n },
{ color: '#111111', attack: 38850000000000000000000n, cost: 153000000000000000000000n },
{ color: '#129999', attack: 388500000000000000000000n, cost: 1530000000000000000000000n },
{ color: '#D84674', attack: 3885000000000000000000000n, cost: 15300000000000000000000000n },
{ color: '#1B9570', attack: 39850000000000000000000000n, cost: 193000000000000000000000000n },
{ color: '#319482', attack: 398500000000000000000000000n, cost: 1930000000000000000000000000n },
{ color: '#391040', attack: 4985000000000000000000000000n, cost: 20300000000000000000000000000n },
{ color: 'olive', attack: 49850000000000000000000000000n, cost: 203000000000000000000000000000n },
{ color: 'indigo', attack: 498500000000000000000000000000n, cost: 9000300000000000000000000000000n },
{ color: 'aqua', attack: 4000985000000000000000000000000n, cost: 90300000000000000000000000000000n },
{ color: 'coral', attack: 49850000000000000000000000000000n, cost: 953000000000000000000000000000000n },
{ color: 'maroon', attack: 498500000000000000000000000000000n, cost: 10300000000000000000000000000000000n },
{ color: 'darkmagenta', attack: 49850000000000000000000000000000000n, cost: 203000000000000000000000000000000000n },
{ color: 'darkgray', attack: 498500000000000000000000000000000000n, cost: 2030000000000000000000000000000000000n },
{ color: 'azure', attack: 4985000000000000000000000000000000000n, cost: 20300000000000000000000000000000000000n },
{ color: 'beige', attack: 49850000000000000000000000000000000000n, cost: 203000000000000000000000000000000000000n },
{ color: 'cornsilk', attack: 498500000000000000000000000000000000000n, cost: 2030000000000000000000000000000000000000n },
{ color: '#FAC8C1', attack: 4985000000000000000000000000000000000000n, cost: 20300000000000000000000000000000000000000n },
{ color: '#6B7121', attack: 49850000000000000000000000000000000000000n, cost: 203000000000000000000000000000000000000000n },
{ color: 'lightgreen', attack: 498500000000000000000000000000000000000000n, cost: 2030000000000000000000000000000000000000000n },
{ color: 'darkgreen', attack: 4985000000000000000000000000000000000000000n, cost: 20300000000000000000000000000000000000000000n }
];

    function createBall(type) {
      const game = document.getElementById('game');
      const div = document.createElement('div');
      div.className = 'ball';
      div.style.backgroundColor = type.color;
      game.appendChild(div);
      balls.push({
        el: div,
        x: Math.random() * (game.clientWidth - 20),
        y: 0,
        vx: (Math.random() - 0.5) * 4,
        vy: 2,
        attack: type.attack,
        cost: type.cost,
        purchased: false,
        lastHitTime: Date.now()
      });
    }

    function renderBallUpgrades() {
      const container = document.getElementById('ballUpgrades');
      container.innerHTML = '';

      ballTypes.forEach((ballType, index) => {
        const btn = document.createElement('button');
        btn.innerHTML = `${ballType.color} Ball è³¼å…¥(${formatBigIntNumber(ballType.cost)})`;
        btn.onclick = () => {
          if (points >= ballType.cost && !balls[index].purchased) {
            points -= ballType.cost;
            balls[index].purchased = true;
            updateUI();
            renderBallUpgrades();
          }
        };
        container.appendChild(btn);
      });



      balls.forEach((b, i) => {
        if (b.purchased) {
          const btn = document.createElement('button');
          btn.innerHTML = `${ballTypes[i].color} Ball æ”»æ’ƒ:${formatBigIntNumber(b.attack)} å¼·åŒ–(${formatBigIntNumber(b.cost)})`;
          btn.onclick = () => {
            if (points >= b.cost) {
              points -= b.cost;
              b.attack = (b.attack * ATTACK_NUM + ATTACK_DEN - 1n) / ATTACK_DEN;
              b.cost = b.cost * COST_NUM / COST_DEN;
              updateUI();
              renderBallUpgrades();
            }
          };
          container.appendChild(btn);
        }
      });

      renderBallInfo();
    }

function tupg() {

if (points >= tapCost) {

tapAttack = tapAttack * 12n / 10n + 1n;

points = points - tapCost;

tapCost = tapCost * 17n / 10n;


renderBallInfo();

updateUI();

};



}

    function renderBallInfo() {
      const info = document.getElementById('ballInfo');
      info.innerHTML = `<div>ã‚¿ãƒƒãƒ—æ”»æ’ƒåŠ›: ${formatBigIntNumber(tapAttack)}, æ¬¡ã®å¼·åŒ–: ${formatBigIntNumber(tapCost)}</div>`;
      balls.forEach((b, i) => {
        if (b.purchased) {
          const div = document.createElement('div');
          div.innerHTML = `${ballTypes[i].color} Ball: æ”»æ’ƒåŠ›=${formatBigIntNumber(b.attack)}, æ¬¡ã®å¼·åŒ–=${formatBigIntNumber(b.cost)}`;
          info.appendChild(div);
        }
      });
    }

    function updateUI() {
      document.getElementById('points').innerHTML = formatBigIntNumber(points);
    }

    function gameLoop() {
      const now = Date.now();
      const game = document.getElementById('game');
      balls.forEach(b => {
        if (b.purchased) {
          b.x += b.vx;
          b.y += b.vy;
          const w = game.clientWidth, h = game.clientHeight;

          if (b.x < 0 || b.x > w - 20) b.vx *= -1;
          if (b.y < 0 || b.y > h - 20) b.vy *= -1;

          b.el.style.left = `${b.x}px`;
          b.el.style.top = `${b.y}px`;

          let hit = false;
          circles.forEach(c => {
            if (c.hp > 0n) {
              const dx = (c.x + 30) - (b.x + 10);
              const dy = (c.y + 30) - (b.y + 10);
              const dist = Math.hypot(dx, dy);
              if (dist < 40) {
                const dmg = b.attack < c.hp ? b.attack : c.hp;
                c.hp -= dmg;
                points += dmg;
                updateUI();
                renderCircles();
                const normalX = dx / dist;
                const normalY = dy / dist;
                const dot = b.vx * normalX + b.vy * normalY;
                b.vx -= 2 * dot * normalX;
                b.vy -= 2 * dot * normalY;
                b.lastHitTime = now;
                hit = true;

                if (circles.every(c => c.hp <= 0n)) {
                  stage++;
                  createCircles();
                }
              }
            }
          });

          // ã‚µãƒœã‚Šæ¤œçŸ¥ï¼š2ç§’ä»¥ä¸Šæ”»æ’ƒã—ã¦ã„ãªã‘ã‚Œã°èª˜å°
          if (!hit && now - b.lastHitTime > 6000) {
            const target = circles.find(c => c.hp > 0n);
            if (target) {
              const dx = (target.x + 30) - (b.x + 10);
              const dy = (target.y + 30) - (b.y + 10);
              const dist = Math.hypot(dx, dy);
              const speed = 2;
              b.vx = (dx / dist) * speed;
              b.vy = (dy / dist) * speed;
            }
          }
        }
      });
      requestAnimationFrame(gameLoop);
    }

    createCircles();
    ballTypes.forEach(createBall);
    renderBallUpgrades();
    updateUI();
    gameLoop();
  </script>
<img src="images/b.png" style="height: 14px; width: 14px;"></img>
<img src="images/iPhone.jpg" style="height: 14px; width: 14px;"></img>
 <img src="images/c.png" style="height: 14px; width: 14px;"></img>
<img src="images/d.png" style="height: 14px; width: 14px;"></img>  
  <img src="images/e.png" style="height: 14px; width: 14px;"></img>
  <img src="images/f.png" style="height: 14px; width: 14px;"></img>
   <img src="images/g.png" style="height: 14px; width: 14px;"></img>
   <img src="images/h.png" style="height: 14px; width: 14px;"></img>
   <img src="images/i.png" style="height: 14px; width: 14px;"></img>
   <img src="images/j.png" style="height: 14px; width: 14px;"></img>
   <img src="images/k.png" style="height: 14px; width: 14px;"></img>
   <img src="images/l.png" style="height: 14px; width: 14px;"></img>
   <img src="images/m.png" style="height: 14px; width: 14px;"></img>
   <img src="images/jon.png" style="height: 14px; width: 14px;"></img>
   <img src="images/o.png" style="height: 14px; width: 14px;"></img>
   <img src="images/p.png" style="height: 14px; width: 14px;"></img>
   <img src="images/q.png" style="height: 14px; width: 14px;"></img>
   <img src="images/r.png" style="height: 14px; width: 14px;"></img>
   <img src="images/s.png" style="height: 14px; width: 14px;"></img>
   <img src="images/t.png" style="height: 14px; width: 14px;"></img>
   <img src="images/u.png" style="height: 14px; width: 14px;"></img>
   <img src="images/v.png" style="height: 14px; width: 14px;"></img>
   <img src="images/w.png" style="height: 14px; width: 14px;"></img>
   <img src="images/x.png" style="height: 14px; width: 14px;"></img>
   <img src="images/y.png" style="height: 14px; width: 14px;"></img>
   <img src="images/z.png" style="height: 14px; width: 14px;"></img>
   <img src="images/aa.png" style="height: 14px; width: 14px;"></img>
  <img src="images/ab.png" style="height: 14px; width: 14px;"></img>
  <img src="images/ac.png" style="height: 14px; width: 14px;"></img>
  <img src="images/ad.png" style="height: 14px; width: 14px;"></img>
  <img src="images/ae.png" style="height: 14px; width: 14px;"></img>
  <img src="images/af.png" style="height: 14px; width: 14px;"></img>
  <img src="images/ag.png" style="height: 14px; width: 14px;"></img>
  <img src="images/ah.png" style="height: 14px; width: 14px;"></img>
  <img src="images/ai.png" style="height: 14px; width: 14px;"></img>
  <img src="images/aj.png" style="height: 14px; width: 14px;"></img>
  <img src="images/ak.png" style="height: 14px; width: 14px;"></img>
  <img src="images/al.png" style="height: 14px; width: 14px;"></img>
  <img src="images/am.png" style="height: 14px; width: 14px;"></img>
  <img src="images/an.png" style="height: 14px; width: 14px;"></img>
  <img src="images/ao.png" style="height: 14px; width: 14px;"></img>
  <img src="images/ap.png" style="height: 14px; width: 14px;"></img>
  <img src="images/aq.png" style="height: 14px; width: 14px;"></img>
  <img src="images/ar.png" style="height: 14px; width: 14px;"></img>
  <img src="images/as.png" style="height: 14px; width: 14px;"></img>
  <img src="images/at.png" style="height: 14px; width: 14px;"></img>
  <img src="images/au.png" style="height: 14px; width: 14px;"></img>
  <img src="images/av.png" style="height: 14px; width: 14px;"></img>
  <img src="images/aw.png" style="height: 14px; width: 14px;"></img>
  <img src="images/ax.png" style="height: 14px; width: 14px;"></img>
  <img src="images/ay.png" style="height: 14px; width: 14px;"></img>
  <img src="images/az.png" style="height: 14px; width: 14px;"></img>
  <img src="images/ba.png" style="height: 14px; width: 14px;"></img>
  <img src="images/bb.png" style="height: 14px; width: 14px;"></img>
  <img src="images/bc.png" style="height: 14px; width: 14px;"></img>
  <img src="images/bd.png" style="height: 14px; width: 14px;"></img>
  <img src="images/be.png" style="height: 14px; width: 14px;"></img>
  <img src="images/bf.png" style="height: 14px; width: 14px;"></img>
  <img src="images/bg.png" style="height: 14px; width: 14px;"></img>
  <img src="images/bh.png" style="height: 14px; width: 14px;"></img>
  <img src="images/bi.png" style="height: 14px; width: 14px;"></img>
  <img src="images/bj.png" style="height: 14px; width: 14px;"></img>
  <img src="images/bk.png" style="height: 14px; width: 14px;"></img>
  <img src="images/bl.png" style="height: 14px; width: 14px;"></img>
  <img src="images/bm.png" style="height: 14px; width: 14px;"></img>
  <img src="images/bn.png" style="height: 14px; width: 14px;"></img>
   <img src="images/bo.png" style="height: 14px; width: 14px;"></img>
   <img src="images/bp.png" style="height: 14px; width: 14px;"></img>
  <img src="images/bq.png" style="height: 14px; width: 14px;"></img>
  <img src="images/br.png" style="height: 14px; width: 14px;"></img>
  <img src="images/bs.png" style="height: 14px; width: 14px;"></img>
  <img src="images/bt.png" style="height: 14px; width: 14px;"></img>
  <img src="images/bu.png" style="height: 14px; width: 14px;"></img>
  <img src="images/bv.png" style="height: 14px; width: 14px;"></img>
  <img src="images/bw.png" style="height: 14px; width: 14px;"></img>
  <img src="images/bx.png" style="height: 14px; width: 14px;"></img>
  <img src="images/by.png" style="height: 14px; width: 14px;"></img>
  <img src="images/bz.png" style="height: 14px; width: 14px;"></img>
  <img src="images/ca.png" style="height: 14px; width: 14px;"></img>
  <img src="images/cb.png" style="height: 14px; width: 14px;"></img>
  <img src="images/cc.png" style="height: 14px; width: 14px;"></img>
  <img src="images/cd.png" style="height: 14px; width: 14px;"></img>
  <img src="images/ce.png" style="height: 14px; width: 14px;"></img>
  <img src="images/cf.png" style="height: 14px; width: 14px;"></img>
  <img src="images/cg.png" style="height: 14px; width: 14px;"></img>
  <img src="images/ch.png" style="height: 14px; width: 14px;"></img>
  <img src="images/ci.png" style="height: 14px; width: 14px;"></img>
  <img src="images/cj.png" style="height: 14px; width: 14px;"></img>
  <img src="images/ck.png" style="height: 14px; width: 14px;"></img>
  <img src="images/cl.png" style="height: 14px; width: 14px;"></img>
  <img src="images/cm.png" style="height: 14px; width: 14px;"></img>
  <img src="images/cn.png" style="height: 14px; width: 14px;"></img>
   <img src="images/co.png" style="height: 14px; width: 14px;"></img>
  <img src="images/cp.png" style="height: 14px; width: 14px;"></img>
  <img src="images/cq.png" style="height: 14px; width: 14px;"></img>
  <img src="images/cr.png" style="height: 14px; width: 14px;"></img>
  <img src="images/cs.png" style="height: 14px; width: 14px;"></img>
  <img src="images/1.png" style="height: 14px; width: 14px;"></img>
  <img src="images/2.png" style="height: 14px; width: 14px;"></img>
  <img src="images/3.png" style="height: 14px; width: 14px;"></img>
  <img src="images/4.png" style="height: 14px; width: 14px;"></img>
  <img src="images/5.png" style="height: 14px; width: 14px;"></img>
  <img src="images/6.png" style="height: 14px; width: 14px;"></img>
  <img src="images/7.png" style="height: 14px; width: 14px;"></img>
  <img src="images/8.png" style="height: 14px; width: 14px;"></img>
  <img src="images/æ‚ªå£.png" style="height: 14px; width: 14px;"></img>
  <img src="images/9.png" style="height: 14px; width: 14px;"></img>
  <img src="images/10.png" style="height: 14px; width: 14px;"></img>
  <img src="images/11.png" style="height: 14px; width: 14px;"></img>
  <img src="images/12.png" style="height: 14px; width: 14px;"></img>
  <img src="images/13.png" style="height: 14px; width: 14px;"></img>
  <img src="images/14.png" style="height: 14px; width: 14px;"></img>
  <img src="images/15.png" style="height: 14px; width: 14px;"></img>
  <img src="images/16.png" style="height: 14px; width: 14px;"></img>
  <img src="images/17.png" style="height: 14px; width: 14px;"></img>
  <img src="images/18.png" style="height: 14px; width: 14px;"></img>
  <img src="images/19.png" style="height: 14px; width: 14px;"></img>
  <img src="images/20.png" style="height: 14px; width: 14px;"></img>
   <img src="images/papasika.png" style="height: 14px; width: 14px;"></img>
 
</body>
</html>